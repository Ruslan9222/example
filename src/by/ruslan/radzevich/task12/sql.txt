-- Найдём повторяющиеся значения
SELECT val
FROM A
WHERE val IN (
    SELECT val
    FROM A
    GROUP BY val
    HAVING COUNT(*) > 1
)
ORDER BY id;
SELECT COUNT(*)
FROM product
WHERE category_id = (
    SELECT category_id
    FROM product
    WHERE name = 'Конфеты'
) AND price < 100;

Как в запросе JPA выводить часть результирующих строк (к примеру, с 10-й до 20-й строки)
PageRequest request = PageRequest.of(10 ,20)
Page<MyEntity> page = myEntityRepository.findAll(pageRequest);

Как этот запрос написать в SQL?

SELECT * FROM MyEntity
ORDER BY id
LIMIT 11
OFFSET 9;

Есть таблицы t1(id, name) и t2(id, t1_id (может повторяться), val).
3.1 Напишите запрос, чтобы вывести список name, для которых val > 30.
3.2  Напишите запрос, чтобы вывести список id и name, для которых сумма val > 30.

3.1
SELECT t1.name
FROM t1
JOIN t2 ON t1.id = t2.t1_id
WHERE t2.val>30;

3.2
SELECT t1.name,
       t1.id
FROM t1
JOIN t2 ON t1.id = t2.t1_id
WHERE t2.val>30


table person
id	name	parent_id
1	Alice	NULL
2	Bob	    1
3	Carol	1
4	Dave	2
SQL: задачка на поиск записей через SELECT с join таблицы самой на себя (self-join)
SELECT
  parent.name AS parent_name,
  child.name AS child_name
FROM person AS child
JOIN person AS parent ON child.parent_id = parent.id;

Задача на sql User(id,name,department_id) Department(id,name). Получить подразделения,
в которых количество сотрудников больше 5

SELECT department.name,
       COUNT(user.name) AS user_count
FROM Department
JOIN USER ON user.department_id = department.id
GROUP BY department.name
HAVING COUNT(user.name)>5

CREATE TABLE book (
    book_id INT,
    title VARCHAR(255),
    author VARCHAR(255),
    price DECIMAL(10,2),
    amount INT
);

INSERT INTO book VALUES
(1, 'Мастер и Маргарита', 'Булгаков М.А.', 540.50, 3),
(2, 'Белая гвардия', 'Булгаков М.А.', 540.50, 5),
(3, 'Идиот', 'Достоевский Ф.М.', 360.80, 2),
(4, 'Братья Карамазовы', 'Достоевский Ф.М.', 799.01, 2),
(5, 'Стихотворения и поэмы', 'Есенин С.А.', 650.00, 15);

CREATE TABLE supply (
    supply_id INT,
    title VARCHAR(255),
    author VARCHAR(255),
    price DECIMAL(10,2),
    amount INT
);

INSERT INTO supply VALUES
(1, 'Лирика', 'Пастернак Б.Л.', 518.99, 9),
(2, 'Черный человек', 'Есенин С.А.', 618.99, 7),
(3, 'Белая гвардия', 'Булгаков М.А.', 540.50, 8),
(4, 'Идиот', 'Достоевский Ф.М.', 360.80, 3);

Занести из таблицы supply в таблицу book только те книги, названия которых отсутствуют в таблице book.

INSERT INTO book (book_id, title, author, price, amount)
SELECT s.supply_id, s.title, s.author, s.price, s.amount
FROM supply s
LEFT JOIN book b ON s.title = b.title
WHERE b.title IS NULL;